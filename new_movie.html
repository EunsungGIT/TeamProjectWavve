<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>새로 올라온 영화 : 웨이브</title>
    <link rel="shortcut icon" href="./images/faviconV2.png" type="image/x-icon">
    <link rel="icon" href="./images/faviconV2.png" type="image/x-icon">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@100;200;300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <!--플러그인 필수 css cdn 연결-->
    <link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.css">
    <link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css">
    <!--플러그인 필수 JS cdn 연결-->
    <script src="https://unpkg.com/swiper/swiper-bundle.js"></script>
    <script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>
    <link rel="stylesheet" href="./styles/reset.css">
    <link rel="stylesheet" href="./styles/common.css">
    <link rel="stylesheet" href="./styles/new_movie.css">
    <link rel="stylesheet" href="./styles/Reaction_type.css/new_movie_reaction.css">
</head>
<body>
    <div class="favorite">관심 에디터Pick으로 등록했어요</div>
    <!-- main -->
    <main>
        <div class="title_wrap">
            <div class="title">
                <div class="left">
                    <h2>새로 올라온 영화</h2>
                    <p>
                        wavvie 영화관은<br>
                        24시간 상영 중!
                    </p>
                </div>
                <button type="button" id="heartBtn"><img src="./images/contents/heart.svg" alt="관심등록"></button>
            </div>
        </div>
        <div class="movie"></div>
        <div class="page">
            <a href="#">1</a>
            <a href="#">2</a>
            <a href="#">3</a>
            <a href="#">4</a>
            <a href="#">5</a>
        </div>
    </main>
    <script src="./script/common.js"></script>
    <script src="./script/new_movie.json"></script>
    <script>
        const movie_list = document.querySelector('.movie')

        fetch('./script/new_movie.json')
        .then(response => response.json())
        .then(data => {
            // 각 영화 정보를 #movie 리스트 아이템에 삽입
            data.forEach((movie, index)=>{
                const listItem = document.createElement('a');
                const indexFormatted = (index + 1).toString().padStart(2, '0');
                listItem.innerHTML = `
                    <img src="./images/data_img/new_movie_img/new_movie_banner_${indexFormatted}.jpg">
                `;
                listItem.addEventListener('click',()=>{
                    window.location.href = movie.link
                })
                movie_list.appendChild(listItem);
            })
        })

        const heart = document.querySelector('#heartBtn')
        const heart_img = document.querySelector('#heartBtn img')
        const favorite = document.querySelector('.favorite')

        let heart_change = true
        favorite.style.display = 'none'
        heart.addEventListener('click',()=>{
            heart_change = !heart_change
            if(heart_change === false){
                heart_img.src = '../images/live_contents/red_heart.svg'
                favorite.innerHTML = '관심 에디터Pick으로 등록했어요'
                favorite.style.display = 'block';
                favorite.classList.add('show')
                setTimeout(() => {
                    favorite.style.display = 'none'
                }, 2000);
            }else{
                heart_img.src = '../images/live_contents/heart.svg'
                favorite.innerHTML = '관심 에디터Pick 등록을 해제했어요'
                favorite.style.display = 'block';
                favorite.classList.add('show')
                setTimeout(() => {
                    favorite.style.display = 'none'
                }, 2000);
            }
        })
    </script>
</body>
</html>